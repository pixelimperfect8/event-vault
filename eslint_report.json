[{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\(auth)\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'router' is assigned a value but never used.","line":10,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'res' is assigned a value but never used.","line":24,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { signIn } from \"next-auth/react\"\r\nimport { useRouter, useSearchParams } from \"next/navigation\"\r\nimport Link from \"next/link\"\r\nimport { Button, Input, Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui-components\"\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter()\r\n    const searchParams = useSearchParams()\r\n    const message = searchParams.get(\"message\")\r\n    const [email, setEmail] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(\"\")\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        setError(\"\")\r\n\r\n        try {\r\n            const res = await signIn(\"credentials\", {\r\n                redirect: true,\r\n                callbackUrl: \"/dashboard\",\r\n                email,\r\n                password,\r\n            })\r\n            // No need to handle success here if redirect: true\r\n        } catch {\r\n            setError(\"Something went wrong\")\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-slate-50 p-4\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader className=\"space-y-1 text-center\">\r\n                    <CardTitle className=\"text-2xl\">Welcome back</CardTitle>\r\n                    <CardDescription>Enter your email to sign in to your account</CardDescription>\r\n                </CardHeader>\r\n                <CardContent className=\"grid gap-4\">\r\n                    {message && (\r\n                        <div className=\"mb-4 rounded bg-green-50 p-3 text-sm text-green-600\">\r\n                            {message}\r\n                        </div>\r\n                    )}\r\n\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => signIn(\"google\", { callbackUrl: \"/dashboard\" })}\r\n                        className=\"w-full\"\r\n                    >\r\n                        Sign in with Google\r\n                    </Button>\r\n\r\n                    <div className=\"relative\">\r\n                        <div className=\"absolute inset-0 flex items-center\">\r\n                            <span className=\"w-full border-t\" />\r\n                        </div>\r\n                        <div className=\"relative flex justify-center text-xs uppercase\">\r\n                            <span className=\"bg-white px-2 text-slate-500\">Or continue with</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Input\r\n                                type=\"email\"\r\n                                placeholder=\"name@example.com\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"grid gap-2\">\r\n                            <Input\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        {error && <p className=\"text-sm text-red-500\">{error}</p>}\r\n                        <Button disabled={loading}>\r\n                            {loading ? \"Signing In...\" : \"Sign In\"}\r\n                        </Button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-4 text-center text-sm\">\r\n                        Don&apos;t have an account?{\" \"}\r\n                        <Link href=\"/register\" className=\"underline\">\r\n                            Sign up\r\n                        </Link>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\(auth)\\register\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\api\\auth\\[...nextauth]\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\api\\debug-db\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1517,1520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1517,1520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from \"next/server\"\r\nimport { db } from \"@/lib/db-client\"\r\n\r\nexport async function GET(request: Request) {\r\n    const { searchParams } = new URL(request.url)\r\n    const email = searchParams.get('email')\r\n\r\n    if (!email) {\r\n        return NextResponse.json({ error: \"Missing email\" }, { status: 400 })\r\n    }\r\n\r\n    try {\r\n        console.log(`Debugging DB update for ${email}...`)\r\n\r\n        // 1. Try to find the user first\r\n        const user = await db.user.findUnique({ where: { email } })\r\n        if (!user) {\r\n            return NextResponse.json({ error: \"User not found\", email }, { status: 404 })\r\n        }\r\n\r\n        // 2. Try to update\r\n        // We bypass the class method to see the raw error if possible, \r\n        // OR we trust our modified db client to log it. \r\n        // Actually, let's use the db client as is, because we added logs there.\r\n        // But to capture the error returned by Supabase, we need to modify db-client again to THROW or RETURN error.\r\n        // Currently it returns NULL on error.\r\n\r\n        const updated = await db.user.update({\r\n            where: { email },\r\n            data: { hasCompletedOnboarding: true }\r\n        })\r\n\r\n        if (!updated) {\r\n            return NextResponse.json({\r\n                status: \"Failed\",\r\n                message: \"db.user.update returned null. Check server logs.\"\r\n            }, { status: 500 })\r\n        }\r\n\r\n        return NextResponse.json({ status: \"Success\", user: updated })\r\n\r\n    } catch (e: any) {\r\n        return NextResponse.json({\r\n            error: \"Exception thrown\",\r\n            details: e.message,\r\n            stack: e.stack\r\n        }, { status: 500 })\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\api\\register\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\bugs\\actions.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":16,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":16,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[464,477],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":21,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":21,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[629,642],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":45,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":45,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1306,1319],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1364,1367],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1364,1367],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function logBug(data: {\r\n    elementSelector: string;\r\n    elementText: string;\r\n    description: string;\r\n}) {\r\n    const session = await getServerSession(authOptions)\r\n    console.log(\"[DEBUG] logBug session:\", !!session, \"User:\", session?.user?.email)\r\n\r\n    // @ts-ignore\r\n    if (!session?.user || session.user.role !== 'APP_MASTER') {\r\n        throw new Error(\"Unauthorized: Only App Masters can log bugs\")\r\n    }\r\n\r\n    // @ts-ignore\r\n    const userId = session.user.id\r\n\r\n    // Log to DB\r\n    const bug = await db.bug.create({\r\n        data: {\r\n            reporterId: userId,\r\n            elementSelector: data.elementSelector,\r\n            elementText: data.elementText,\r\n            description: data.description\r\n        }\r\n    })\r\n\r\n    revalidatePath(\"/dashboard\")\r\n    revalidatePath(\"/dashboard/bugs\")\r\n\r\n    // In a real scenario, this would trigger an AI event\r\n    console.log(`[AI-TRGGER] New bug logged: ${bug.id}. Initiating background fix...`)\r\n\r\n    return bug\r\n}\r\n\r\nexport async function resolveBug(bugId: string) {\r\n    const session = await getServerSession(authOptions)\r\n    // @ts-ignore\r\n    if (!session?.user || (session.user as any).role !== 'APP_MASTER') {\r\n        throw new Error(\"Unauthorized\")\r\n    }\r\n\r\n    try {\r\n        const updatedBug = await db.bug.update({\r\n            where: { id: bugId },\r\n            data: { status: 'FIXED' }\r\n        })\r\n        revalidatePath(\"/dashboard/bugs\")\r\n        console.log(`[AI-RESOLVE] Bug ${bugId} marked as FIXED.`)\r\n        return updatedBug\r\n    } catch (error) {\r\n        console.error(\"Failed to resolve bug:\", error)\r\n        throw error\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\bugs\\bug-list-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[335,338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[335,338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2104,2107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2104,2107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":138,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8227,8270],"text":"\r\n                                        &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8227,8270],"text":"\r\n                                        &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8227,8270],"text":"\r\n                                        &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8227,8270],"text":"\r\n                                        &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":138,"column":60,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[8288,8327],"text":"&quot;\r\n                                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[8288,8327],"text":"&ldquo;\r\n                                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[8288,8327],"text":"&#34;\r\n                                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[8288,8327],"text":"&rdquo;\r\n                                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Card, CardContent, CardHeader, Button } from \"@/components/ui-components\"\r\nimport { Bug, Clock, User, Hash, CheckCircle2, ChevronRight } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { resolveBug } from \"./actions\"\r\n\r\ninterface BugListClientProps {\r\n    bugs: any[]\r\n}\r\n\r\nexport function BugListClient({ bugs: initialBugs }: BugListClientProps) {\r\n    const [bugs, setBugs] = useState(initialBugs)\r\n    const [resolving, setResolving] = useState<string | null>(null)\r\n    const [filter, setFilter] = useState<'ALL' | 'PENDING' | 'FIXED'>('ALL')\r\n\r\n    const filteredBugs = bugs.filter(bug =>\r\n        filter === 'ALL' || bug.status === filter\r\n    )\r\n\r\n    const handleResolve = async (id: string) => {\r\n        setResolving(id)\r\n        try {\r\n            await resolveBug(id)\r\n            setBugs(prev => prev.map(b => b.id === id ? { ...b, status: 'FIXED' } : b))\r\n        } catch (err) {\r\n            console.error(err)\r\n            alert(\"Failed to resolve bug\")\r\n        } finally {\r\n            setResolving(null)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center gap-2 bg-slate-100/50 p-1.5 rounded-2xl w-fit border border-slate-200 shadow-sm\">\r\n                {(['ALL', 'PENDING', 'FIXED'] as const).map((f) => (\r\n                    <button\r\n                        key={f}\r\n                        onClick={() => setFilter(f)}\r\n                        className={cn(\r\n                            \"px-4 py-2 text-xs font-bold rounded-xl transition-all\",\r\n                            filter === f\r\n                                ? \"bg-white text-indigo-600 shadow-sm border border-slate-200\"\r\n                                : \"text-slate-500 hover:text-slate-700 hover:bg-white/50\"\r\n                        )}\r\n                    >\r\n                        {f}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n                {filteredBugs.map((bug: any) => (\r\n                    <Card\r\n                        key={bug.id}\r\n                        className={cn(\r\n                            \"overflow-hidden border-slate-200 hover:shadow-xl transition-all duration-300 group relative\",\r\n                            bug.status === 'FIXED' && \"opacity-75 grayscale-[0.5]\"\r\n                        )}\r\n                    >\r\n                        <CardHeader className={cn(\r\n                            \"bg-slate-50/50 border-b border-slate-100 py-4 px-6 flex flex-row items-center justify-between\",\r\n                            bug.status === 'FIXED' && \"bg-green-50/30\"\r\n                        )}>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className={cn(\r\n                                    \"h-2 w-2 rounded-full\",\r\n                                    bug.status === 'PENDING' ? \"bg-orange-500 animate-pulse\" : \"bg-green-500\"\r\n                                )} />\r\n                                <span className=\"text-[10px] font-bold uppercase tracking-wider text-slate-400\">\r\n                                    {bug.status}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 text-[10px] font-mono text-slate-400 group-hover:text-slate-600 transition-colors\">\r\n                                <Hash className=\"h-3 w-3\" />\r\n                                {bug.id.slice(0, 8)}\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-6 space-y-4\">\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-start justify-between gap-4\">\r\n                                    <h4 className={cn(\r\n                                        \"text-sm font-bold text-slate-900 leading-snug group-hover:text-indigo-600 transition-colors\",\r\n                                        bug.status === 'FIXED' && \"line-through decoration-slate-300\"\r\n                                    )}>\r\n                                        {bug.description || \"No description provided\"}\r\n                                    </h4>\r\n                                    {bug.status === 'PENDING' && (\r\n                                        <Button\r\n                                            size=\"icon\"\r\n                                            variant=\"ghost\"\r\n                                            className=\"h-8 w-8 rounded-full bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white transition-all transform hover:scale-110 active:scale-95 flex-shrink-0\"\r\n                                            onClick={() => handleResolve(bug.id)}\r\n                                            disabled={resolving === bug.id}\r\n                                            title=\"Mark as Fixed\"\r\n                                        >\r\n                                            {resolving === bug.id ? (\r\n                                                <div className=\"h-4 w-4 border-2 border-indigo-600 border-t-white rounded-full animate-spin\" />\r\n                                            ) : (\r\n                                                <CheckCircle2 className=\"h-4 w-4\" />\r\n                                            )}\r\n                                        </Button>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"bg-slate-900/90 text-[10px] font-mono text-slate-300 p-2.5 rounded-xl flex items-center justify-between group/selector transition-all hover:bg-slate-900 shadow-inner\">\r\n                                    <span className=\"truncate max-w-[180px]\">{bug.element_selector}</span>\r\n                                    <ChevronRight className=\"h-3 w-3 opacity-0 group-hover/selector:opacity-50 transition-all -translate-x-1 group-hover/selector:translate-x-0\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-col gap-2.5 pt-4 border-t border-slate-100\">\r\n                                <div className=\"flex items-center gap-3 text-xs text-slate-500\">\r\n                                    <div className=\"h-6 w-6 rounded-lg bg-slate-100 flex items-center justify-center\">\r\n                                        <Clock className=\"h-3.5 w-3.5 text-slate-400\" />\r\n                                    </div>\r\n                                    <span className=\"font-medium\">\r\n                                        {new Date(bug.created_at).toLocaleDateString()} at {new Date(bug.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-xs text-slate-500\">\r\n                                    <div className=\"h-6 w-6 rounded-lg bg-slate-100 flex items-center justify-center\">\r\n                                        <User className=\"h-3.5 w-3.5 text-slate-400\" />\r\n                                    </div>\r\n                                    <span className=\"font-medium\">Reporter: App Master</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {bug.element_text && (\r\n                                <div className=\"mt-4 bg-indigo-50/50 border border-indigo-100/50 rounded-2xl p-3.5 group-hover:bg-indigo-50 transition-colors relative overflow-hidden\">\r\n                                    <div className=\"absolute top-0 right-0 p-2 opacity-10\">\r\n                                        <Bug className=\"h-8 w-8 text-indigo-600\" />\r\n                                    </div>\r\n                                    <p className=\"text-[10px] font-bold text-indigo-500 uppercase mb-1 tracking-wider\">Element Context</p>\r\n                                    <p className=\"text-xs text-indigo-900 italic font-semibold truncate leading-relaxed\">\r\n                                        \"{bug.element_text}\"\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                        </CardContent>\r\n\r\n                        {bug.status === 'FIXED' && (\r\n                            <div className=\"absolute inset-0 bg-green-50/5 flex items-center justify-center pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                <div className=\"bg-white/80 backdrop-blur-sm border border-green-100 px-4 py-2 rounded-full flex items-center gap-2 shadow-sm transform -rotate-3 translate-y-2\">\r\n                                    <CheckCircle2 className=\"h-4 w-4 text-green-600\" />\r\n                                    <span className=\"text-xs font-bold text-green-700\">RESOLVED</span>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\bugs\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":5,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardHeader' is defined but never used.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":6,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":6,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Hash' is defined but never used.","line":6,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle2' is defined but never used.","line":6,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[854,857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[854,857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[862,865],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[862,865],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1725,1728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1725,1728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui-components\"\r\nimport { Bug, Clock, User, Hash, CheckCircle2 } from \"lucide-react\"\r\nimport { BugListClient } from \"./bug-list-client\"\r\n\r\nexport default async function BugsPage() {\r\n    const session = await getServerSession(authOptions)\r\n\r\n    if (!session || !session.user) {\r\n        redirect(\"/login\")\r\n    }\r\n\r\n    const user = await db.user.findUnique({ where: { email: session.user.email! } })\r\n    if (!user || user.role !== 'APP_MASTER') {\r\n        redirect(\"/dashboard\")\r\n    }\r\n\r\n    const bugs = await db.bug.findMany({ where: {} })\r\n\r\n    // Sort bugs by newest first\r\n    const sortedBugs = [...bugs].sort((a: any, b: any) =>\r\n        new Date(b.created_at).getTime() - new Date(a.created_at).getTime()\r\n    )\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-7xl mx-auto space-y-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold tracking-tight text-slate-900 flex items-center gap-3\">\r\n                        <Bug className=\"h-8 w-8 text-red-600\" />\r\n                        Bug Dashboard\r\n                    </h1>\r\n                    <p className=\"text-slate-500 mt-1\">Track and manage UI fixes reported via the App Master tool.</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className=\"text-right hidden sm:block\">\r\n                        <p className=\"text-sm font-bold text-slate-900\">{sortedBugs.filter((b: any) => b.status === 'PENDING').length} Pending</p>\r\n                        <p className=\"text-[10px] text-slate-400 uppercase font-bold tracking-wider\">Active Queue</p>\r\n                    </div>\r\n                    <div className=\"bg-red-50 text-red-700 px-4 py-2 rounded-full text-xs font-bold border border-red-100 flex items-center gap-2\">\r\n                        <div className=\"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse\" />\r\n                        MASTER CONTROL\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {sortedBugs.length === 0 ? (\r\n                <div className=\"bg-white border border-dashed border-slate-200 rounded-3xl p-12 text-center shadow-sm\">\r\n                    <div className=\"h-16 w-16 bg-slate-50 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                        <Bug className=\"h-8 w-8 text-slate-300\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-semibold text-slate-900\">No bugs reported yet</h3>\r\n                    <p className=\"text-slate-500 max-w-xs mx-auto mt-2 text-sm leading-relaxed\">\r\n                        Any bugs you report using the capture tool will appear here for processing by the AI Auto-fixer.\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <BugListClient bugs={sortedBugs} />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\dashboard-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\design-system\\design-system-client.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layout' is defined but never used.","line":4,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronRight' is defined but never used.","line":4,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":56},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":172,"column":45,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10365,10532],"text":"\r\n                                            &quot;Design is not just what it looks like and feels like. Design is how it works.\"\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10365,10532],"text":"\r\n                                            &ldquo;Design is not just what it looks like and feels like. Design is how it works.\"\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10365,10532],"text":"\r\n                                            &#34;Design is not just what it looks like and feels like. Design is how it works.\"\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10365,10532],"text":"\r\n                                            &rdquo;Design is not just what it looks like and feels like. Design is how it works.\"\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":172,"column":123,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10365,10532],"text":"\r\n                                            \"Design is not just what it looks like and feels like. Design is how it works.&quot;\r\n                                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10365,10532],"text":"\r\n                                            \"Design is not just what it looks like and feels like. Design is how it works.&ldquo;\r\n                                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10365,10532],"text":"\r\n                                            \"Design is not just what it looks like and feels like. Design is how it works.&#34;\r\n                                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10365,10532],"text":"\r\n                                            \"Design is not just what it looks like and feels like. Design is how it works.&rdquo;\r\n                                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":188,"column":34,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11363,11587],"text":"\r\n                                I&apos;ve established an automated workflow. Every time I create or modify a component in the `src/components` directory, I will automatically documentation it here.\r\n                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11363,11587],"text":"\r\n                                I&lsquo;ve established an automated workflow. Every time I create or modify a component in the `src/components` directory, I will automatically documentation it here.\r\n                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11363,11587],"text":"\r\n                                I&#39;ve established an automated workflow. Every time I create or modify a component in the `src/components` directory, I will automatically documentation it here.\r\n                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11363,11587],"text":"\r\n                                I&rsquo;ve established an automated workflow. Every time I create or modify a component in the `src/components` directory, I will automatically documentation it here.\r\n                            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Palette, Type, Layout, Component, ChevronRight, Copy, Check, Box } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button, Input, Card, CardHeader, CardContent, Label, Select, Textarea } from \"@/components/ui-components\"\r\n\r\nconst COLORS = [\r\n    { name: 'Indigo 600', hex: '#4f46e5', class: 'bg-indigo-600' },\r\n    { name: 'Slate 900', hex: '#0f172a', class: 'bg-slate-900' },\r\n    { name: 'Slate 500', hex: '#64748b', class: 'bg-slate-500' },\r\n    { name: 'Green 500', hex: '#22c55e', class: 'bg-green-500' },\r\n    { name: 'Red 600', hex: '#dc2626', class: 'bg-red-600' },\r\n    { name: 'Amber 500', hex: '#f59e0b', class: 'bg-amber-500' },\r\n]\r\n\r\nconst TYPOGRAPHY = [\r\n    { label: 'Display Large', size: 'text-5xl', weight: 'font-black', tracking: 'tracking-tighter' },\r\n    { label: 'Heading 1', size: 'text-3xl', weight: 'font-bold', tracking: 'tracking-tight' },\r\n    { label: 'Body Lead', size: 'text-lg', weight: 'font-medium', tracking: 'normal text-slate-600' },\r\n    { label: 'Body Base', size: 'text-sm', weight: 'font-normal', tracking: 'normal text-slate-700' },\r\n    { label: 'Caption', size: 'text-[10px]', weight: 'font-bold', tracking: 'uppercase tracking-widest text-slate-400' },\r\n]\r\n\r\nexport function DesignSystemClient() {\r\n    const [activeSection, setActiveSection] = useState<'tokens' | 'components'>('tokens')\r\n    const [copied, setCopied] = useState<string | null>(null)\r\n\r\n    const copyToClipboard = (text: string) => {\r\n        navigator.clipboard.writeText(text)\r\n        setCopied(text)\r\n        setTimeout(() => setCopied(null), 2000)\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-12\">\r\n            {/* Navigation Tabs */}\r\n            <div className=\"flex items-center gap-8 border-b border-slate-200\">\r\n                <button\r\n                    onClick={() => setActiveSection('tokens')}\r\n                    className={cn(\r\n                        \"pb-4 text-sm font-bold transition-all relative\",\r\n                        activeSection === 'tokens' ? \"text-indigo-600\" : \"text-slate-400 hover:text-slate-600\"\r\n                    )}\r\n                >\r\n                    Design Tokens\r\n                    {activeSection === 'tokens' && <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 rounded-full\" />}\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveSection('components')}\r\n                    className={cn(\r\n                        \"pb-4 text-sm font-bold transition-all relative\",\r\n                        activeSection === 'components' ? \"text-indigo-600\" : \"text-slate-400 hover:text-slate-600\"\r\n                    )}\r\n                >\r\n                    Component Sheet\r\n                    {activeSection === 'components' && <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 rounded-full\" />}\r\n                </button>\r\n            </div>\r\n\r\n            {activeSection === 'tokens' && (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                    {/* Colors */}\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-8 w-8 rounded-lg bg-slate-100 flex items-center justify-center\">\r\n                                <Palette className=\"h-4 w-4 text-slate-600\" />\r\n                            </div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">Color Palette</h2>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\r\n                            {COLORS.map(color => (\r\n                                <button\r\n                                    key={color.name}\r\n                                    onClick={() => copyToClipboard(color.hex)}\r\n                                    className=\"group relative text-left space-y-2 p-2 rounded-2xl hover:bg-white hover:shadow-xl hover:shadow-slate-200/50 transition-all border border-transparent hover:border-slate-100\"\r\n                                >\r\n                                    <div className={cn(\"aspect-square rounded-xl shadow-inner\", color.class)} />\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-bold text-slate-900 uppercase tracking-wider\">{color.name}</p>\r\n                                        <p className=\"text-[10px] font-mono text-slate-400\">{color.hex}</p>\r\n                                    </div>\r\n                                    <div className=\"absolute top-4 right-4 h-6 w-6 bg-white/20 backdrop-blur-md rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                        {copied === color.hex ? <Check className=\"h-3 w-3 text-white\" /> : <Copy className=\"h-3 w-3 text-white\" />}\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Typography */}\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-8 w-8 rounded-lg bg-slate-100 flex items-center justify-center\">\r\n                                <Type className=\"h-4 w-4 text-slate-600\" />\r\n                            </div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">Typography</h2>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-3xl p-8 border border-slate-200 shadow-sm space-y-8\">\r\n                            {TYPOGRAPHY.map(type => (\r\n                                <div key={type.label} className=\"space-y-2 group\">\r\n                                    <p className=\"text-[10px] font-bold text-indigo-500 uppercase tracking-[0.2em]\">{type.label}</p>\r\n                                    <p className={cn(type.size, type.weight, type.tracking, \"transition-all group-hover:pl-2 border-l-2 border-transparent group-hover:border-indigo-100\")}>\r\n                                        The quick brown fox jumps over the lazy dog\r\n                                    </p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeSection === 'components' && (\r\n                <div className=\"space-y-12 animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"h-8 w-8 rounded-lg bg-indigo-50 flex items-center justify-center\">\r\n                                <Component className=\"h-4 w-4 text-indigo-600\" />\r\n                            </div>\r\n                            <h2 className=\"text-xl font-bold text-slate-900\">Registered Components</h2>\r\n                        </div>\r\n                        <div className=\"bg-slate-900 text-white text-[10px] font-bold px-3 py-1.5 rounded-full flex items-center gap-2\">\r\n                            <div className=\"h-1.5 w-1.5 rounded-full bg-green-500 animate-pulse\" />\r\n                            AUTO-SYNC ACTIVE\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-12\">\r\n                        {/* Section: Buttons */}\r\n                        <ComponentSection title=\"Interaction / Buttons\">\r\n                            <div className=\"flex flex-wrap gap-4 items-center\">\r\n                                <Button>Primary Action</Button>\r\n                                <Button variant=\"secondary\">Secondary Action</Button>\r\n                                <Button variant=\"outline\">Outline Action</Button>\r\n                                <Button variant=\"ghost\">Ghost Action</Button>\r\n                                <Button variant=\"destructive\">Destructive</Button>\r\n                            </div>\r\n                        </ComponentSection>\r\n\r\n                        {/* Section: Inputs */}\r\n                        <ComponentSection title=\"Forms / Controls\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Text Input</Label>\r\n                                    <Input placeholder=\"Enter placeholder text...\" />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Select Dropdown</Label>\r\n                                    <Select>\r\n                                        <option>Select an option</option>\r\n                                        <option>Option 1</option>\r\n                                        <option>Option 2</option>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"space-y-2 md:col-span-2\">\r\n                                    <Label>Text Area</Label>\r\n                                    <Textarea placeholder=\"Type your message here...\" />\r\n                                </div>\r\n                            </div>\r\n                        </ComponentSection>\r\n\r\n                        {/* Section: Cards */}\r\n                        <ComponentSection title=\"Containment / Cards\">\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n                                <Card>\r\n                                    <CardHeader>\r\n                                        <h3 className=\"font-bold\">Standard Card</h3>\r\n                                        <p className=\"text-xs text-slate-500\">Subtext or description goes here.</p>\r\n                                    </CardHeader>\r\n                                    <CardContent>\r\n                                        <p className=\"text-sm text-slate-700 leading-relaxed italic border-l-4 border-indigo-500 pl-4\">\r\n                                            \"Design is not just what it looks like and feels like. Design is how it works.\"\r\n                                        </p>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </div>\r\n                        </ComponentSection>\r\n                    </div>\r\n\r\n                    {/* Auto-registration Notice */}\r\n                    <div className=\"bg-indigo-600 rounded-3xl p-8 text-white relative overflow-hidden shadow-2xl shadow-indigo-200\">\r\n                        <div className=\"absolute top-0 right-0 p-12 opacity-10\">\r\n                            <Box className=\"h-64 w-64 rotate-12\" />\r\n                        </div>\r\n                        <div className=\"relative z-10 max-w-xl space-y-4\">\r\n                            <h3 className=\"text-2xl font-black\">AI Auto-Registry</h3>\r\n                            <p className=\"text-indigo-100 font-medium leading-relaxed\">\r\n                                I've established an automated workflow. Every time I create or modify a component in the `src/components` directory, I will automatically documentation it here.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction ComponentSection({ title, children }: { title: string, children: React.ReactNode }) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <h3 className=\"text-xs font-black uppercase tracking-[0.2em] text-slate-400 inline-flex items-center gap-2\">\r\n                {title}\r\n                <div className=\"h-[1px] w-12 bg-slate-200\" />\r\n            </h3>\r\n            <div className=\"bg-white border border-slate-200 rounded-[2.5rem] p-10 shadow-sm hover:shadow-xl hover:shadow-slate-200/50 transition-all duration-500\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\design-system\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Palette' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Type' is defined but never used.","line":5,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layout' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Component' is defined but never used.","line":5,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardContent' is defined but never used.","line":6,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CardHeader' is defined but never used.","line":6,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":39}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { Palette, Type, Layout, Component, Box } from \"lucide-react\"\r\nimport { Card, CardContent, CardHeader } from \"@/components/ui-components\"\r\nimport { DesignSystemClient } from \"./design-system-client\"\r\n\r\nexport default async function DesignSystemPage() {\r\n    const session = await getServerSession(authOptions)\r\n\r\n    if (!session || !session.user) {\r\n        redirect(\"/login\")\r\n    }\r\n\r\n    const user = await db.user.findUnique({ where: { email: session.user.email! } })\r\n    if (!user || user.role !== 'APP_MASTER') {\r\n        redirect(\"/dashboard\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-8 max-w-7xl mx-auto space-y-12 bg-slate-50/30 min-h-screen\">\r\n            {/* Premium Header */}\r\n            <div className=\"space-y-4\">\r\n                <div className=\"flex items-center gap-3 text-indigo-600\">\r\n                    <Box className=\"h-6 w-6\" />\r\n                    <span className=\"text-xs font-bold uppercase tracking-[0.2em]\">App Master Resources</span>\r\n                </div>\r\n                <div className=\"flex items-end justify-between\">\r\n                    <div>\r\n                        <h1 className=\"text-5xl font-black tracking-tighter text-slate-900 mb-2\">Design System</h1>\r\n                        <p className=\"text-slate-500 text-lg max-w-2xl font-medium leading-relaxed\">\r\n                            The visual foundation of EventVault. A curated collection of tokens, components, and patterns that power our premium experience.\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"hidden lg:block text-right\">\r\n                        <p className=\"text-3xl font-black text-slate-900\">v1.0.0</p>\r\n                        <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest\">System Version</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <DesignSystemClient />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\events\\[id]\\client-view.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Bug' is defined but never used.","line":5,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":92},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[436,439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[436,439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'activity' is defined but never used.","line":15,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4477,4480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4477,4480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":115,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":118,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4510,4513],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4510,4513],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":92,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4736,4739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4736,4739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5128,5131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5128,5131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5703,5706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5703,5706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Button, Card, CardContent, CardHeader, CardTitle } from \"@/components/ui-components\"\r\nimport { FileText, Upload, MoreVertical, Calendar as CalendarIcon, MapPin, User, Check, Bug } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Event, Contract } from \"@/lib/types\"\r\n\r\ninterface EventClientViewProps {\r\n    event: Event\r\n    contracts: Contract[]\r\n    activity: any[]\r\n}\r\n\r\nexport function EventClientView({ event, contracts, activity }: EventClientViewProps) {\r\n    const [activeTab, setActiveTab] = useState(\"contracts\")\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-slate-50/30\">\r\n            {/* Header */}\r\n            <div className=\"bg-white border-b border-slate-200 px-8 py-6\">\r\n                <div className=\"flex items-start justify-between\">\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-bold text-slate-900 tracking-tight mb-2\">{event.name}</h1>\r\n                        <div className=\"flex items-center gap-6 text-sm text-slate-500\">\r\n                            {event.clientName && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <User className=\"h-4 w-4\" />\r\n                                    {event.clientName}\r\n                                </div>\r\n                            )}\r\n                            {event.startDate && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <CalendarIcon className=\"h-4 w-4\" />\r\n                                    {event.startDate}\r\n                                </div>\r\n                            )}\r\n                            {event.venueName && (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <MapPin className=\"h-4 w-4\" />\r\n                                    {event.venueName}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button variant=\"outline\">Edit Event</Button>\r\n                        <Button>Share</Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-6 mt-8 border-b border-slate-100 -mb-6 scrollbar-hide overflow-x-auto whitespace-nowrap\">\r\n                    {[\"Overview\", \"Contracts\", \"Activity\"].map((tab) => (\r\n                        <button\r\n                            key={tab}\r\n                            onClick={() => setActiveTab(tab.toLowerCase())}\r\n                            className={cn(\r\n                                \"pb-4 text-sm font-medium border-b-2 transition-colors\",\r\n                                activeTab === tab.toLowerCase()\r\n                                    ? \"border-slate-900 text-slate-900\"\r\n                                    : \"border-transparent text-slate-500 hover:text-slate-700\"\r\n                            )}\r\n                        >\r\n                            {tab}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-8 max-w-6xl\">\r\n\r\n                {activeTab === \"overview\" && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-3 gap-6\">\r\n                            <Card>\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <CardTitle className=\"text-sm font-medium text-slate-500\">Total Contracts</CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"text-3xl font-bold\">{contracts.length}</div>\r\n                                </CardContent>\r\n                            </Card>\r\n                            <Card>\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <CardTitle className=\"text-sm font-medium text-slate-500\">Tasks Completed</CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"text-3xl font-bold\">\r\n                                        {event.sections?.reduce((acc: number, s: any) => acc + s.tasks.filter((t: any) => t.completed).length, 0) || 0}\r\n                                        <span className=\"text-sm text-slate-400 font-normal ml-2\">\r\n                                            / {event.sections?.reduce((acc: number, s: any) => acc + s.tasks.length, 0) || 0}\r\n                                        </span>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            {event.sections?.map((section: any, idx: number) => (\r\n                                <Card key={idx}>\r\n                                    <CardHeader className=\"pb-3 border-b border-slate-50 bg-slate-50/30\">\r\n                                        <CardTitle className=\"text-base font-semibold text-slate-900\">{section.title}</CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardContent className=\"pt-4 px-0\">\r\n                                        <div className=\"space-y-1\">\r\n                                            {section.tasks.map((task: any, tIdx: number) => (\r\n                                                <div key={tIdx} className=\"flex items-center gap-3 px-6 py-2 hover:bg-slate-50/80 transition-colors group\">\r\n                                                    <div className={cn(\r\n                                                        \"h-4 w-4 rounded-md border flex items-center justify-center transition-colors\",\r\n                                                        task.completed ? \"bg-indigo-600 border-indigo-600\" : \"border-slate-300 group-hover:border-indigo-400\"\r\n                                                    )}>\r\n                                                        {task.completed && <Check className=\"h-3 w-3 text-white\" />}\r\n                                                    </div>\r\n                                                    <span className={cn(\r\n                                                        \"text-sm\",\r\n                                                        task.completed ? \"text-slate-400 line-through\" : \"text-slate-700\"\r\n                                                    )}>\r\n                                                        {task.title}\r\n                                                    </span>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            ))}\r\n                            {(!event.sections || event.sections.length === 0) && (\r\n                                <Card className=\"p-12 text-center text-slate-500 col-span-2 border-dashed\">\r\n                                    No tasks set up yet. Try adding a section.\r\n                                </Card>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === \"contracts\" && (\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h2 className=\"text-lg font-semibold\">Contracts & Files</h2>\r\n                            <Button>\r\n                                <Upload className=\"mr-2 h-4 w-4\" />\r\n                                Upload Contract\r\n                            </Button>\r\n                        </div>\r\n\r\n                        {contracts.length === 0 ? (\r\n                            <Card className=\"p-8 text-center text-slate-500\">\r\n                                No contracts uploaded yet.\r\n                            </Card>\r\n                        ) : (\r\n                            <div className=\"grid gap-4\">\r\n                                {contracts.map(contract => (\r\n                                    <Card key={contract.id} className=\"overflow-hidden\">\r\n                                        <div className=\"p-6 flex items-start justify-between\">\r\n                                            <div className=\"flex gap-4\">\r\n                                                <div className=\"h-12 w-12 rounded-lg bg-orange-100 flex items-center justify-center flex-shrink-0\">\r\n                                                    <FileText className=\"h-6 w-6 text-orange-600\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h3 className=\"font-semibold text-slate-900\">{contract.title}</h3>\r\n                                                    <div className=\"flex items-center gap-2 mt-1\">\r\n                                                        <span className={cn(\r\n                                                            \"px-2 py-0.5 rounded-full text-xs font-medium\",\r\n                                                            contract.status === \"SIGNED\" ? \"bg-green-100 text-green-700\" :\r\n                                                                contract.status === \"DRAFT\" ? \"bg-amber-100 text-amber-700\" :\r\n                                                                    \"bg-slate-100 text-slate-700\"\r\n                                                        )}>\r\n                                                            {contract.status}\r\n                                                        </span>\r\n                                                        {contract.versions.length > 0 && (\r\n                                                            <>\r\n                                                                <span className=\"text-xs text-slate-400\"> v{contract.versions[0].version}</span>\r\n                                                                <span className=\"text-xs text-slate-400\"> Updated {contract.versions[0].date}</span>\r\n                                                            </>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <Button variant=\"ghost\" size=\"icon\">\r\n                                                <MoreVertical className=\"h-4 w-4 text-slate-400\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                        <div className=\"bg-slate-50 px-6 py-3 border-t border-slate-100 flex items-center justify-between\">\r\n                                            <div className=\"text-xs text-slate-500\">\r\n                                                {contract.versions.length > 0 ? `Latest file: ${contract.versions[0].file}` : \"No file uploaded\"}\r\n                                            </div>\r\n                                            <Button variant=\"ghost\" size=\"sm\" className=\"h-auto py-1 text-xs text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50\">\r\n                                                View Analysis\r\n                                            </Button>\r\n                                        </div>\r\n                                    </Card>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === \"activity\" && (\r\n                    <div className=\"max-w-xl\">\r\n                        <h2 className=\"text-lg font-semibold mb-6\">Activity Log</h2>\r\n                        <div className=\"text-slate-500 text-sm\">No recent activity</div>\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\events\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1149,1152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1149,1152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1240,1243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1240,1243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { EventClientView } from \"./client-view\" // Split Client/Server\r\n\r\ninterface PageProps {\r\n    params: { id: string }\r\n}\r\n\r\nexport default async function EventPage({ params }: PageProps) {\r\n    const session = await getServerSession(authOptions)\r\n    if (!session || !session.user?.email) redirect(\"/login\")\r\n\r\n    const event = await db.event.findUnique({ where: { id: params.id } })\r\n\r\n    if (!event) {\r\n        return <div className=\"p-8\">Event not found</div>\r\n    }\r\n\r\n    // Check ownership (simple check)\r\n    const user = await db.user.findUnique({ where: { email: session.user.email } })\r\n    if (!user || event.userId !== user.id) {\r\n        return <div className=\"p-8\">Access denied</div>\r\n    }\r\n\r\n    const contracts = await db.contract.findMany({ where: { eventId: event.id } })\r\n    // Activity log is not yet in DB, passing empty or mock for now if needed, or update DB schema. \r\n    // Let's pass empty for now to be strictly real.\r\n    const activity: any[] = []\r\n\r\n    return <EventClientView\r\n        event={{ ...event, role: user.role } as any}\r\n        contracts={contracts}\r\n        activity={activity}\r\n    />\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\events\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[326,329],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[326,329],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1195,1198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1195,1198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { revalidatePath } from \"next/cache\"\r\nimport { redirect } from \"next/navigation\"\r\n\r\nimport { EVENT_TEMPLATES } from \"@/lib/templates\"\r\n\r\nexport async function createEvent(data: any) {\r\n    const session = await getServerSession(authOptions)\r\n    if (!session?.user?.email) throw new Error(\"Unauthorized\")\r\n\r\n    const user = await db.user.findUnique({ where: { email: session.user.email } })\r\n    if (!user) throw new Error(\"User not found\")\r\n\r\n    // Find and apply template if templateId is provided\r\n    let sections = []\r\n    if (data.templateId) {\r\n        const template = EVENT_TEMPLATES.find(t => t.id === data.templateId)\r\n        if (template) {\r\n            sections = template.sections\r\n        }\r\n    }\r\n\r\n    const event = await db.event.create({\r\n        data: {\r\n            ...data,\r\n            userId: user.id,\r\n            status: 'PLANNING',\r\n            sections: sections\r\n        }\r\n    })\r\n\r\n    revalidatePath(\"/dashboard\")\r\n    redirect(`/dashboard/events/${event.id}`)\r\n}\r\n\r\nexport async function saveEventDraft(data: any) {\r\n    const session = await getServerSession(authOptions)\r\n    if (!session?.user?.email) throw new Error(\"Unauthorized\")\r\n\r\n    const user = await db.user.findUnique({ where: { email: session.user.email } })\r\n    if (!user) throw new Error(\"User not found\")\r\n\r\n    const event = await db.event.create({\r\n        data: {\r\n            ...data,\r\n            userId: user.id,\r\n            status: 'DRAFT'\r\n        }\r\n    })\r\n\r\n    revalidatePath(\"/dashboard\")\r\n    return event\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1140,1143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1140,1143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getServerSession } from \"next-auth\"\r\nimport { authOptions } from \"@/lib/auth\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport { Sidebar } from \"@/components/sidebar\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { BugCaptureTool } from \"@/components/app-master/BugCaptureTool\"\r\nimport { MobileHeader } from \"@/components/mobile-header\"\r\n\r\nexport default async function DashboardLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode\r\n}) {\r\n    const session = await getServerSession(authOptions)\r\n\r\n    if (!session || !session.user || !session.user.email) {\r\n        redirect(\"/login\")\r\n    }\r\n\r\n    const user = await db.user.findUnique({\r\n        where: { email: session.user.email! }\r\n    })\r\n\r\n    if (!user) {\r\n        redirect(\"/login\")\r\n    }\r\n\r\n    if (!user.hasCompletedOnboarding) {\r\n        redirect(\"/onboarding\")\r\n    }\r\n\r\n    const events = await db.event.findMany({ where: { userId: user.id } })\r\n    const isAppMaster = user.role === 'APP_MASTER'\r\n\r\n    let pendingBugCount = 0\r\n    if (isAppMaster) {\r\n        const bugs = await db.bug.findMany({ where: {} })\r\n        pendingBugCount = bugs.filter((b: any) => b.status === 'PENDING').length\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-white overflow-hidden\">\r\n            {/* Desktop Sidebar */}\r\n            <div className=\"hidden md:block\">\r\n                <Sidebar events={events} user={user} pendingBugCount={pendingBugCount} />\r\n            </div>\r\n\r\n            <div className=\"flex-1 flex flex-col min-w-0 overflow-hidden\">\r\n                <MobileHeader user={user} events={events} pendingBugCount={pendingBugCount} />\r\n\r\n                <main className=\"flex-1 overflow-y-auto\">\r\n                    {children}\r\n                </main>\r\n            </div>\r\n\r\n            {isAppMaster && <BugCaptureTool />}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\onboarding\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\onboarding\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'router' is assigned a value but never used.","line":19,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { Button, Card, CardContent, CardDescription, CardHeader, CardTitle, Input } from \"@/components/ui-components\"\r\nimport { Check, ArrowRight } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { completeOnboarding } from \"./actions\"\r\n\r\nconst PLAN_TYPES = [\r\n    \"Weddings\", \"Corporate Events\", \"Social Gatherings\", \"Conferences\", \"Non-Profit\", \"Other\"\r\n]\r\n\r\nconst STORAGE_METHODS = [\r\n    \"Google Drive\", \"Dropbox\", \"Email Attachments\", \"Physical Binders\", \"Desktop Folders\", \"Other\"\r\n]\r\n\r\nexport default function OnboardingPage() {\r\n    const router = useRouter()\r\n    const [step, setStep] = useState(1)\r\n    const [selectedPlans, setSelectedPlans] = useState<string[]>([])\r\n    const [selectedStorage, setSelectedStorage] = useState<string[]>([])\r\n    const [workspaceName, setWorkspaceName] = useState(\"\")\r\n\r\n    const toggleSelection = (item: string, list: string[], setList: (l: string[]) => void) => {\r\n        if (list.includes(item)) {\r\n            setList(list.filter(i => i !== item))\r\n        } else {\r\n            setList([...list, item])\r\n        }\r\n    }\r\n\r\n    const handleNext = async () => {\r\n        if (step < 3) setStep(step + 1)\r\n        else {\r\n            // Server action handles redirect, which throws an error we shouldn't catch\r\n            await completeOnboarding({\r\n                plans: selectedPlans,\r\n                storage: selectedStorage,\r\n                workspaceName\r\n            })\r\n        }\r\n    }\r\n\r\n    const isStepValid = () => {\r\n        if (step === 1) return selectedPlans.length > 0\r\n        if (step === 2) return selectedStorage.length > 0\r\n        if (step === 3) return workspaceName.length > 2\r\n        return false\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-slate-50 p-4\">\r\n            <Card className=\"w-full max-w-lg shadow-lg\">\r\n                <CardHeader>\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <span className=\"text-sm font-medium text-slate-500\">Step {step} of 3</span>\r\n                        <div className=\"flex gap-1\">\r\n                            {[1, 2, 3].map(i => (\r\n                                <div key={i} className={cn(\"h-2 w-8 rounded-full transition-colors\", i <= step ? \"bg-slate-900\" : \"bg-slate-200\")} />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <CardTitle className=\"text-2xl\">\r\n                        {step === 1 && \"What type of events do you plan?\"}\r\n                        {step === 2 && \"How do you store contracts today?\"}\r\n                        {step === 3 && \"Name your workspace\"}\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        {step === 1 && \"Select all that apply. This helps us customize templates.\"}\r\n                        {step === 2 && \"We'll help you migrate or link to your existing files.\"}\r\n                        {step === 3 && \"This will be your home base for all events.\"}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {step === 1 && (\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            {PLAN_TYPES.map(type => (\r\n                                <button\r\n                                    key={type}\r\n                                    onClick={() => toggleSelection(type, selectedPlans, setSelectedPlans)}\r\n                                    className={cn(\r\n                                        \"flex items-center justify-between p-4 rounded-lg border text-sm font-medium transition-all hover:border-slate-400\",\r\n                                        selectedPlans.includes(type)\r\n                                            ? \"border-slate-900 bg-slate-50 ring-1 ring-slate-900\"\r\n                                            : \"border-slate-200 bg-white\"\r\n                                    )}\r\n                                >\r\n                                    {type}\r\n                                    {selectedPlans.includes(type) && <Check className=\"h-4 w-4 text-slate-900\" />}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {step === 2 && (\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            {STORAGE_METHODS.map(method => (\r\n                                <button\r\n                                    key={method}\r\n                                    onClick={() => toggleSelection(method, selectedStorage, setSelectedStorage)}\r\n                                    className={cn(\r\n                                        \"flex items-center justify-between p-4 rounded-lg border text-sm font-medium transition-all hover:border-slate-400\",\r\n                                        selectedStorage.includes(method)\r\n                                            ? \"border-slate-900 bg-slate-50 ring-1 ring-slate-900\"\r\n                                            : \"border-slate-200 bg-white\"\r\n                                    )}\r\n                                >\r\n                                    {method}\r\n                                    {selectedStorage.includes(method) && <Check className=\"h-4 w-4 text-slate-900\" />}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {step === 3 && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-medium\">Workspace Name</label>\r\n                                <Input\r\n                                    placeholder=\"e.g. Acme Events HQ\"\r\n                                    value={workspaceName}\r\n                                    onChange={(e) => setWorkspaceName(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"mt-8 flex justify-end\">\r\n                        <Button\r\n                            onClick={handleNext}\r\n                            className=\"w-full sm:w-auto\"\r\n                            disabled={!isStepValid()}\r\n                        >\r\n                            {step === 3 ? \"Complete Setup\" : \"Next Step\"}\r\n                            {step !== 3 && <ArrowRight className=\"ml-2 h-4 w-4\" />}\r\n                        </Button>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\components\\app-master\\BugCaptureTool.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MousePointer2' is defined but never used.","line":5,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":48,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":96,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3555,3558],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3555,3558],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":193,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8748,8761],"text":"What&apos;s wrong?"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8748,8761],"text":"What&lsquo;s wrong?"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8748,8761],"text":"What&#39;s wrong?"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8748,8761],"text":"What&rsquo;s wrong?"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect, useRef } from \"react\"\r\nimport { Button, Card, CardHeader, CardTitle, CardContent, Label, Textarea } from \"@/components/ui-components\"\r\nimport { Bug, X, MousePointer2, Crosshair, Loader2, CheckCircle2 } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { logBug } from \"@/app/dashboard/bugs/actions\"\r\n\r\nexport function BugCaptureTool() {\r\n    const [isActive, setIsActive] = useState(false)\r\n    const [isSelecting, setIsSelecting] = useState(false)\r\n    const [selection, setSelection] = useState<{ startX: number, startY: number, endX: number, endY: number } | null>(null)\r\n    const [selectedElement, setSelectedElement] = useState<{ selector: string, text: string } | null>(null)\r\n    const [showModal, setShowModal] = useState(false)\r\n    const [description, setDescription] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [success, setSuccess] = useState(false)\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    const overlayRef = useRef<HTMLDivElement>(null)\r\n\r\n    const toggleTool = () => {\r\n        setIsActive(!isActive)\r\n        setSelection(null)\r\n        setSelectedElement(null)\r\n    }\r\n\r\n    const handleMouseDown = (e: React.MouseEvent) => {\r\n        if (!isActive || showModal) return\r\n        setIsSelecting(true)\r\n        setSelection({\r\n            startX: e.clientX,\r\n            startY: e.clientY,\r\n            endX: e.clientX,\r\n            endY: e.clientY\r\n        })\r\n    }\r\n\r\n    const handleMouseMove = (e: React.MouseEvent) => {\r\n        if (!isSelecting || !selection) return\r\n        setSelection(prev => prev ? ({\r\n            ...prev,\r\n            endX: e.clientX,\r\n            endY: e.clientY\r\n        }) : null)\r\n    }\r\n\r\n    const handleMouseUp = (e: React.MouseEvent) => {\r\n        if (!isSelecting || !selection) return\r\n        setIsSelecting(false)\r\n\r\n        // Find element under the end point (or center of selection)\r\n        const midX = (selection.startX + selection.endX) / 2\r\n        const midY = (selection.startY + selection.endY) / 2\r\n\r\n        // Temporarily hide overlay to get element underneath\r\n        if (overlayRef.current) overlayRef.current.style.pointerEvents = 'none'\r\n        const el = document.elementFromPoint(midX, midY)\r\n        if (overlayRef.current) overlayRef.current.style.pointerEvents = 'auto'\r\n\r\n        if (el) {\r\n            const selector = getSelector(el)\r\n            const text = (el as HTMLElement).innerText?.slice(0, 100) || \"\"\r\n            setSelectedElement({ selector, text })\r\n            setShowModal(true)\r\n        }\r\n    }\r\n\r\n    const getSelector = (el: Element): string => {\r\n        if (el.id) return `#${el.id}`\r\n        let selector = el.tagName.toLowerCase()\r\n        if (el.className && typeof el.className === 'string') {\r\n            selector += `.${el.className.split(' ').join('.')}`\r\n        }\r\n        return selector\r\n    }\r\n\r\n    const handleSubmit = async () => {\r\n        if (!selectedElement) return\r\n        setLoading(true)\r\n        try {\r\n            await logBug({\r\n                elementSelector: selectedElement.selector,\r\n                elementText: selectedElement.text,\r\n                description\r\n            })\r\n            setSuccess(true)\r\n            setError(null)\r\n            setTimeout(() => {\r\n                setShowModal(false)\r\n                setIsActive(false)\r\n                setSuccess(false)\r\n                setSelection(null)\r\n                setDescription(\"\")\r\n            }, 3000)\r\n        } catch (err: any) {\r\n            console.error(\"Bug Capture Tool Error:\", err)\r\n            // Handle Next.js server action error objects\r\n            let message = \"Failed to log bug. Please try again.\"\r\n            if (typeof err === 'string') message = err\r\n            else if (err.message) message = err.message\r\n            else if (typeof err === 'object') {\r\n                try {\r\n                    message = err.message || JSON.stringify(err, (key, value) =>\r\n                        typeof value === 'object' && value !== null ? value : value\r\n                        , 2)\r\n                    // If it's just a digest/anonymized error, try to be more descriptive\r\n                    if (message.includes('digest')) {\r\n                        message = \"Server Error: The database might be out of sync. Please try refreshing or check the console.\"\r\n                    }\r\n                } catch {\r\n                    message = \"An unexpected error occurred\"\r\n                }\r\n            }\r\n            setError(message)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const selectionStyle: React.CSSProperties = selection ? {\r\n        left: Math.min(selection.startX, selection.endX),\r\n        top: Math.min(selection.startY, selection.endY),\r\n        width: Math.abs(selection.endX - selection.startX),\r\n        height: Math.abs(selection.endY - selection.startY),\r\n    } : {}\r\n\r\n    return (\r\n        <>\r\n            {/* Toggle Button */}\r\n            <div className=\"fixed bottom-6 right-6 z-[60]\">\r\n                <Button\r\n                    onClick={toggleTool}\r\n                    className={cn(\r\n                        \"h-12 w-12 rounded-full shadow-lg transition-all duration-300\",\r\n                        isActive ? \"bg-red-600 hover:bg-red-700 text-white rotate-90\" : \"bg-indigo-600 hover:bg-indigo-700 text-white\"\r\n                    )}\r\n                    size=\"icon\"\r\n                >\r\n                    {isActive ? <X className=\"h-6 w-6\" /> : <Bug className=\"h-6 w-6\" />}\r\n                </Button>\r\n            </div>\r\n\r\n            {/* Selection Overlay */}\r\n            {isActive && (\r\n                <div\r\n                    ref={overlayRef}\r\n                    className=\"fixed inset-0 z-[55] cursor-crosshair bg-slate-900/10\"\r\n                    onMouseDown={handleMouseDown}\r\n                    onMouseMove={handleMouseMove}\r\n                    onMouseUp={handleMouseUp}\r\n                >\r\n                    <div className=\"absolute top-4 left-1/2 -translate-x-1/2 bg-white px-4 py-2 rounded-full shadow-md border border-slate-200 flex items-center gap-2 animate-bounce\">\r\n                        <Crosshair className=\"h-4 w-4 text-indigo-600\" />\r\n                        <span className=\"text-sm font-medium\">Click and drag to select an element</span>\r\n                    </div>\r\n\r\n                    {selection && (\r\n                        <div\r\n                            className=\"absolute border-2 border-dashed border-red-500 bg-red-500/10 pointer-events-none\"\r\n                            style={selectionStyle}\r\n                        />\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Bug Report Modal */}\r\n            {showModal && (\r\n                <div className=\"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm\">\r\n                    <Card className=\"w-full max-w-md shadow-2xl\">\r\n                        <CardHeader className=\"border-b\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                                    <Bug className=\"h-5 w-5 text-red-600\" />\r\n                                    Report UI Issue\r\n                                </CardTitle>\r\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => setShowModal(false)}>&times;</Button>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent className=\"p-6 space-y-4\">\r\n                            {success ? (\r\n                                <div className=\"py-8 text-center space-y-3 animate-in fade-in zoom-in\">\r\n                                    <CheckCircle2 className=\"h-12 w-12 text-green-500 mx-auto\" />\r\n                                    <p className=\"font-semibold text-slate-900\">Bug Logged Successfully!</p>\r\n                                    <p className=\"text-sm text-slate-500\">Antigravity will begin fixing it in the background.</p>\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"p-3 bg-slate-50 border rounded text-[10px] font-mono text-slate-600 overflow-hidden text-ellipsis whitespace-nowrap\">\r\n                                        <span className=\"font-bold text-slate-400\">Selector:</span> {selectedElement?.selector}\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label htmlFor=\"bug-desc\">What's wrong?</Label>\r\n                                        <Textarea\r\n                                            id=\"bug-desc\"\r\n                                            placeholder=\"e.g. This button is misaligned on mobile, or the color doesn't match the design.\"\r\n                                            value={description}\r\n                                            onChange={(e) => setDescription(e.target.value)}\r\n                                            rows={4}\r\n                                            className={cn(error && \"border-red-300\")}\r\n                                        />\r\n                                        {error && <p className=\"text-xs text-red-500 mt-1\">{error}</p>}\r\n                                    </div>\r\n                                    <div className=\"flex gap-2 justify-end\">\r\n                                        <Button variant=\"outline\" onClick={() => setShowModal(false)}>Cancel</Button>\r\n                                        <Button onClick={handleSubmit} disabled={loading || !description.trim()}>\r\n                                            {loading ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : \"Save Bug\"}\r\n                                        </Button>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\components\\events\\EventWizard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Textarea' is defined but never used.","line":4,"column":99,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":107},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":5,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MapPin' is defined but never used.","line":5,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1202,1205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1202,1205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1267,1270],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1267,1270],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":275,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[14529,14706],"text":"\r\n                                            We&apos;ll automatically set up your event dashboard and prepare your contract tracking table.\r\n                                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[14529,14706],"text":"\r\n                                            We&lsquo;ll automatically set up your event dashboard and prepare your contract tracking table.\r\n                                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[14529,14706],"text":"\r\n                                            We&#39;ll automatically set up your event dashboard and prepare your contract tracking table.\r\n                                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[14529,14706],"text":"\r\n                                            We&rsquo;ll automatically set up your event dashboard and prepare your contract tracking table.\r\n                                        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Button, Card, CardContent, CardHeader, CardTitle, CardDescription, Label, Input, Select, Textarea } from \"@/components/ui-components\"\r\nimport { ChevronRight, ChevronLeft, Check, Calendar, MapPin, Settings, AlertCircle, Loader2 } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { createEvent, saveEventDraft } from \"@/app/dashboard/events/actions\"\r\nimport { EVENT_TEMPLATES } from \"@/lib/templates\"\r\n\r\ninterface EventWizardProps {\r\n    onClose: () => void\r\n}\r\n\r\nexport function EventWizard({ onClose }: EventWizardProps) {\r\n    const [step, setStep] = useState(1)\r\n    const [loading, setLoading] = useState(false)\r\n    const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        clientName: \"\",\r\n        type: \"Wedding\",\r\n        status: \"PLANNING\",\r\n        startDate: \"\",\r\n        endDate: \"\",\r\n        startTime: \"\",\r\n        endTime: \"\",\r\n        venueName: \"\",\r\n        venueAddress: \"\",\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        templateId: \"blank\",\r\n        vendors: [] as any[],\r\n    })\r\n\r\n    const updateField = (field: string, value: any) => {\r\n        setFormData(prev => ({ ...prev, [field]: value }))\r\n        if (errors[field]) {\r\n            setErrors(prev => {\r\n                const newErrors = { ...prev }\r\n                delete newErrors[field]\r\n                return newErrors\r\n            })\r\n        }\r\n    }\r\n\r\n    const validateStep = (currentStep: number) => {\r\n        const newErrors: Record<string, string> = {}\r\n        if (currentStep === 1) {\r\n            if (!formData.name.trim()) newErrors.name = \"Event name is required\"\r\n        }\r\n        setErrors(newErrors)\r\n        return Object.keys(newErrors).length === 0\r\n    }\r\n\r\n    const nextStep = () => {\r\n        if (validateStep(step)) {\r\n            setStep(prev => Math.min(prev + 1, 3))\r\n        }\r\n    }\r\n\r\n    const prevStep = () => {\r\n        setStep(prev => Math.max(prev - 1, 1))\r\n    }\r\n\r\n    const handleCreate = async () => {\r\n        if (!validateStep(3)) return\r\n        setLoading(true)\r\n        try {\r\n            await createEvent(formData)\r\n        } catch (error) {\r\n            console.error(error)\r\n            setErrors({ submit: \"Failed to create event\" })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleSaveDraft = async () => {\r\n        setLoading(true)\r\n        try {\r\n            await saveEventDraft(formData)\r\n            onClose()\r\n        } catch (error) {\r\n            console.error(error)\r\n            setErrors({ submit: \"Failed to save draft\" })\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-0 md:p-4\">\r\n            <Card className=\"w-full h-full md:h-auto md:max-w-2xl shadow-2xl animate-in fade-in zoom-in duration-200 rounded-none md:rounded-2xl flex flex-col\">\r\n                <CardHeader className=\"border-b bg-slate-50/50\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <CardTitle>Create New Event</CardTitle>\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>&times;</Button>\r\n                    </div>\r\n                    {/* Progress Indicator */}\r\n                    <div className=\"flex items-center gap-2 mt-4\">\r\n                        {[1, 2, 3].map(i => (\r\n                            <div key={i} className=\"flex-1 flex items-center gap-2\">\r\n                                <div className={cn(\r\n                                    \"h-8 w-8 rounded-full flex items-center justify-center text-xs font-bold transition-colors\",\r\n                                    step >= i ? \"bg-slate-900 text-white\" : \"bg-slate-200 text-slate-500\"\r\n                                )}>\r\n                                    {step > i ? <Check className=\"h-4 w-4\" /> : i}\r\n                                </div>\r\n                                {i < 3 && <div className={cn(\"flex-1 h-1 rounded-full\", step > i ? \"bg-slate-900\" : \"bg-slate-200\")} />}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"flex justify-between mt-2 px-1\">\r\n                        <span className={cn(\"text-xs font-medium\", step === 1 ? \"text-slate-900\" : \"text-slate-400\")}>Basics</span>\r\n                        <span className={cn(\"text-xs font-medium\", step === 2 ? \"text-slate-900\" : \"text-slate-400\")}>Dates & Place</span>\r\n                        <span className={cn(\"text-xs font-medium\", step === 3 ? \"text-slate-900\" : \"text-slate-400\")}>Setup</span>\r\n                    </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"p-6 md:p-8 flex-1 overflow-y-auto\">\r\n                    {step === 1 && (\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\">Event Name *</Label>\r\n                                <Input\r\n                                    id=\"name\"\r\n                                    placeholder=\"e.g. Smith & Jones Wedding\"\r\n                                    value={formData.name}\r\n                                    onChange={e => updateField(\"name\", e.target.value)}\r\n                                    className={cn(errors.name && \"border-red-500\")}\r\n                                />\r\n                                {errors.name && <p className=\"text-xs text-red-500 flex items-center gap-1\"><AlertCircle className=\"h-3 w-3\" /> {errors.name}</p>}\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"client\">Client / Organization</Label>\r\n                                <Input\r\n                                    id=\"client\"\r\n                                    placeholder=\"Who is this for?\"\r\n                                    value={formData.clientName}\r\n                                    onChange={e => updateField(\"clientName\", e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"type\">Event Type</Label>\r\n                                    <Select\r\n                                        id=\"type\"\r\n                                        value={formData.type}\r\n                                        onChange={e => updateField(\"type\", e.target.value)}\r\n                                    >\r\n                                        <option value=\"Wedding\">Wedding</option>\r\n                                        <option value=\"Corporate\">Corporate</option>\r\n                                        <option value=\"Social\">Social</option>\r\n                                        <option value=\"Conference\">Conference</option>\r\n                                        <option value=\"Non-Profit\">Non-Profit</option>\r\n                                        <option value=\"Other\">Other</option>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"status\">Initial Status</Label>\r\n                                    <Select\r\n                                        id=\"status\"\r\n                                        value={formData.status}\r\n                                        onChange={e => updateField(\"status\", e.target.value)}\r\n                                    >\r\n                                        <option value=\"PLANNING\">Planning</option>\r\n                                        <option value=\"ACTIVE\">Active / On-Site</option>\r\n                                        <option value=\"COMPLETED\">Completed</option>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {step === 2 && (\r\n                        <div className=\"space-y-6 animate-in slide-in-from-right-4 duration-300\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"startDate\">Start Date</Label>\r\n                                    <Input\r\n                                        id=\"startDate\"\r\n                                        type=\"date\"\r\n                                        value={formData.startDate}\r\n                                        onChange={e => updateField(\"startDate\", e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"startTime\">Start Time (Optional)</Label>\r\n                                    <Input\r\n                                        id=\"startTime\"\r\n                                        type=\"time\"\r\n                                        value={formData.startTime}\r\n                                        onChange={e => updateField(\"startTime\", e.target.value)}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"endDate\">End Date</Label>\r\n                                    <Input\r\n                                        id=\"endDate\"\r\n                                        type=\"date\"\r\n                                        value={formData.endDate}\r\n                                        onChange={e => updateField(\"endDate\", e.target.value)}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"endTime\">End Time (Optional)</Label>\r\n                                    <Input\r\n                                        id=\"endTime\"\r\n                                        type=\"time\"\r\n                                        value={formData.endTime}\r\n                                        onChange={e => updateField(\"endTime\", e.target.value)}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"venueName\">Venue Name</Label>\r\n                                <Input\r\n                                    id=\"venueName\"\r\n                                    placeholder=\"The Grand Hotel\"\r\n                                    value={formData.venueName}\r\n                                    onChange={e => updateField(\"venueName\", e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"timezone\">Timezone</Label>\r\n                                <Input\r\n                                    id=\"timezone\"\r\n                                    value={formData.timezone}\r\n                                    onChange={e => updateField(\"timezone\", e.target.value)}\r\n                                />\r\n                                <p className=\"text-[10px] text-slate-400\">Auto-detected: {Intl.DateTimeFormat().resolvedOptions().timeZone}</p>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {step === 3 && (\r\n                        <div className=\"space-y-6 animate-in slide-in-from-right-4 duration-300\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"template\">Start from Template</Label>\r\n                                <Select\r\n                                    id=\"template\"\r\n                                    value={formData.templateId}\r\n                                    onChange={e => updateField(\"templateId\", e.target.value)}\r\n                                >\r\n                                    {EVENT_TEMPLATES.map(t => (\r\n                                        <option key={t.id} value={t.id}>{t.name}</option>\r\n                                    ))}\r\n                                </Select>\r\n                                <CardDescription>Templates seed your event with sections and tasks to get you started faster.</CardDescription>\r\n                            </div>\r\n\r\n                            <div className=\"p-4 bg-slate-50 border border-slate-200 rounded-lg space-y-4\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <h4 className=\"text-sm font-semibold\">Additional Setup (Coming Soon)</h4>\r\n                                </div>\r\n                                <div className=\"grid grid-cols-2 gap-4 opacity-50 pointer-events-none\">\r\n                                    <div className=\"p-3 bg-white border rounded border-dashed text-xs text-center text-slate-500\">\r\n                                        Upload Contracts\r\n                                    </div>\r\n                                    <div className=\"p-3 bg-white border rounded border-dashed text-xs text-center text-slate-500\">\r\n                                        Add Vendors\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-4 bg-indigo-50 border border-indigo-100 rounded-lg\">\r\n                                <div className=\"flex gap-3\">\r\n                                    <Settings className=\"h-5 w-5 text-indigo-600 shrink-0\" />\r\n                                    <div>\r\n                                        <h4 className=\"text-sm font-semibold text-indigo-900\">Automation Enabled</h4>\r\n                                        <p className=\"text-xs text-indigo-700 mt-1\">\r\n                                            We'll automatically set up your event dashboard and prepare your contract tracking table.\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n\r\n                <div className=\"border-t p-6 flex items-center justify-between bg-slate-50/50\">\r\n                    <div className=\"flex gap-2\">\r\n                        <Button variant=\"ghost\" onClick={handleSaveDraft} disabled={loading}>\r\n                            {loading ? <Loader2 className=\"h-4 w-4 animate-spin\" /> : \"Save Draft\"}\r\n                        </Button>\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                        {step > 1 && (\r\n                            <Button variant=\"outline\" onClick={prevStep} disabled={loading}>\r\n                                <ChevronLeft className=\"mr-2 h-4 w-4\" />\r\n                                Back\r\n                            </Button>\r\n                        )}\r\n                        {step < 3 ? (\r\n                            <Button onClick={nextStep}>\r\n                                Next Step\r\n                                <ChevronRight className=\"ml-2 h-4 w-4\" />\r\n                            </Button>\r\n                        ) : (\r\n                            <Button onClick={handleCreate} disabled={loading}>\r\n                                {loading && <Loader2 className=\"h-4 w-4 animate-spin mr-2\" />}\r\n                                Complete Setup\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\components\\mobile-header.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[448,451],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[448,451],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[465,468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[465,468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from \"react\"\r\nimport { Menu, X, Plus, Calendar, LayoutDashboard, LogOut, Settings, Bug } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui-components\"\r\nimport Link from \"next/link\"\r\nimport { usePathname } from \"next/navigation\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { signOut } from \"next-auth/react\"\r\nimport { EventWizard } from \"./events/EventWizard\"\r\n\r\ninterface MobileHeaderProps {\r\n    user: any\r\n    events: any[]\r\n    pendingBugCount?: number\r\n}\r\n\r\nexport function MobileHeader({ user, events, pendingBugCount = 0 }: MobileHeaderProps) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [showWizard, setShowWizard] = useState(false)\r\n    const pathname = usePathname()\r\n\r\n    const navItems = [\r\n        { label: 'Dashboard', href: '/dashboard', icon: LayoutDashboard },\r\n        { label: 'Settings', href: '#', icon: Settings },\r\n    ]\r\n\r\n    return (\r\n        <>\r\n            <header className=\"md:hidden h-16 border-b border-slate-200 bg-white/80 backdrop-blur-md sticky top-0 z-40 px-4 flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <span className=\"font-bold text-lg tracking-tight text-slate-900\">EventVault</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    {user.role === 'APP_MASTER' && pendingBugCount > 0 && (\r\n                        <div className=\"h-5 w-5 bg-red-600 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse\">\r\n                            {pendingBugCount}\r\n                        </div>\r\n                    )}\r\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => setIsOpen(true)}>\r\n                        <Menu className=\"h-6 w-6 text-slate-600\" />\r\n                    </Button>\r\n                </div>\r\n            </header>\r\n\r\n            {/* Mobile Drawer */}\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-50 md:hidden bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200\">\r\n                    <div className=\"fixed inset-y-0 right-0 w-[85%] max-w-sm bg-white shadow-2xl animate-in slide-in-from-right duration-300 flex flex-col\">\r\n                        <div className=\"p-4 border-b flex items-center justify-between\">\r\n                            <span className=\"font-bold text-slate-900\">Menu</span>\r\n                            <Button variant=\"ghost\" size=\"icon\" onClick={() => setIsOpen(false)}>\r\n                                <X className=\"h-6 w-6\" />\r\n                            </Button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-6\">\r\n                            <nav className=\"space-y-1\">\r\n                                {navItems.map(item => (\r\n                                    <Link key={item.label} href={item.href} onClick={() => setIsOpen(false)}>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            className={cn(\"w-full justify-start h-12 text-base\", pathname === item.href && \"bg-slate-100 font-semibold\")}\r\n                                        >\r\n                                            <item.icon className=\"mr-3 h-5 w-5 opacity-70\" />\r\n                                            {item.label}\r\n                                        </Button>\r\n                                    </Link>\r\n                                ))}\r\n\r\n                                {user.role === 'APP_MASTER' && (\r\n                                    <Link href=\"/dashboard/bugs\" onClick={() => setIsOpen(false)}>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            className={cn(\"w-full justify-start h-12 text-base text-red-600\", pathname === \"/dashboard/bugs\" && \"bg-red-50 font-semibold\")}\r\n                                        >\r\n                                            <Bug className=\"mr-3 h-5 w-5 opacity-70\" />\r\n                                            Bugs Dashboard\r\n                                            {pendingBugCount > 0 && (\r\n                                                <span className=\"ml-auto bg-red-600 text-white text-[10px] font-bold h-5 w-5 flex items-center justify-center rounded-full\">\r\n                                                    {pendingBugCount}\r\n                                                </span>\r\n                                            )}\r\n                                        </Button>\r\n                                    </Link>\r\n                                )}\r\n\r\n                                {user.role === 'APP_MASTER' && (\r\n                                    <Link href=\"/dashboard/design-system\" onClick={() => setIsOpen(false)}>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            className={cn(\"w-full justify-start h-12 text-base text-indigo-600\", pathname === \"/dashboard/design-system\" && \"bg-indigo-50 font-semibold\")}\r\n                                        >\r\n                                            <LayoutDashboard className=\"mr-3 h-5 w-5 opacity-70\" />\r\n                                            Design System\r\n                                        </Button>\r\n                                    </Link>\r\n                                )}\r\n                            </nav>\r\n\r\n                            <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center justify-between px-2\">\r\n                                    <h3 className=\"text-xs font-semibold uppercase tracking-wider text-slate-500\">Events</h3>\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8\"\r\n                                        onClick={() => {\r\n                                            setIsOpen(false)\r\n                                            setShowWizard(true)\r\n                                        }}\r\n                                    >\r\n                                        <Plus className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    {events.length === 0 ? (\r\n                                        <p className=\"px-2 text-sm text-slate-400\">No events yet.</p>\r\n                                    ) : (\r\n                                        events.map(evt => (\r\n                                            <Link key={evt.id} href={`/dashboard/events/${evt.id}`} onClick={() => setIsOpen(false)}>\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    className={cn(\"w-full justify-start h-11 font-normal truncate text-sm\", pathname.includes(evt.id) && \"bg-indigo-50 text-indigo-700 font-medium\")}\r\n                                                >\r\n                                                    <Calendar className=\"mr-3 h-4 w-4 opacity-60\" />\r\n                                                    {evt.name}\r\n                                                </Button>\r\n                                            </Link>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t bg-slate-50\">\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold\">\r\n                                        {user.name?.[0].toUpperCase() || 'U'}\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-sm font-semibold text-slate-900\">{user.name || 'User'}</p>\r\n                                        <p className=\"text-xs text-slate-500 truncate max-w-[150px]\">{user.email}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <Button\r\n                                variant=\"outline\"\r\n                                className=\"w-full text-red-600 border-red-100 hover:bg-red-50 hover:text-red-700 h-11\"\r\n                                onClick={() => signOut({ callbackUrl: '/login' })}\r\n                            >\r\n                                <LogOut className=\"mr-2 h-4 w-4\" />\r\n                                Sign Out\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {showWizard && <EventWizard onClose={() => setShowWizard(false)} />}\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\components\\sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":7,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":35}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport { usePathname } from \"next/navigation\"\r\nimport { signOut } from \"next-auth/react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { LayoutDashboard, Calendar, Settings, Plus, Search, LogOut, Bug } from \"lucide-react\"\r\nimport { Button, Input } from \"@/components/ui-components\"\r\nimport { Event } from \"@/lib/types\"\r\nimport { useState } from \"react\"\r\nimport { EventWizard } from \"./events/EventWizard\"\r\n\r\ninterface SidebarProps {\r\n    events: Event[]\r\n    user: {\r\n        name?: string | null\r\n        email?: string | null\r\n        role?: string | null\r\n    }\r\n    pendingBugCount?: number\r\n}\r\n\r\nexport function Sidebar({ events, user, pendingBugCount = 0 }: SidebarProps) {\r\n    const pathname = usePathname()\r\n    const [showWizard, setShowWizard] = useState(false)\r\n\r\n    return (\r\n        <>\r\n            <aside className=\"w-64 border-r border-slate-200 bg-white flex flex-col h-full shadow-[1px_0_0_0_rgba(0,0,0,0.05)]\">\r\n                <div className=\"p-4 h-16 flex items-center border-b border-slate-100 px-6\">\r\n                    <div className=\"h-8 w-8 rounded-lg bg-indigo-600 flex items-center justify-center mr-3 shadow-md shadow-indigo-200\">\r\n                        <span className=\"text-white font-bold text-lg\">E</span>\r\n                    </div>\r\n                    <span className=\"font-bold text-lg tracking-tight text-slate-900\">EventVault</span>\r\n                </div>\r\n\r\n                <div className=\"p-4 px-6\">\r\n                    <div className=\"relative group\">\r\n                        <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-slate-400 group-focus-within:text-indigo-500 transition-colors\" />\r\n                        <Input\r\n                            placeholder=\"Search events...\"\r\n                            className=\"pl-9 h-10 bg-slate-50 border-transparent focus:bg-white focus:border-indigo-100 transition-all text-sm rounded-xl\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto py-2 px-4 space-y-8\">\r\n                    <div>\r\n                        <h3 className=\"mb-3 px-2 text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400\">\r\n                            Navigate\r\n                        </h3>\r\n                        <nav className=\"space-y-1\">\r\n                            <Link href=\"/dashboard\">\r\n                                <Button\r\n                                    variant=\"ghost\"\r\n                                    className={cn(\r\n                                        \"w-full justify-start h-10 px-3 rounded-xl transition-all\",\r\n                                        pathname === \"/dashboard\" ? \"bg-indigo-50 text-indigo-700 font-semibold\" : \"text-slate-600 hover:bg-slate-50\"\r\n                                    )}\r\n                                    size=\"sm\"\r\n                                >\r\n                                    <LayoutDashboard className={cn(\"mr-3 h-4 w-4\", pathname === \"/dashboard\" ? \"text-indigo-600\" : \"text-slate-400\")} />\r\n                                    Dashboard\r\n                                </Button>\r\n                            </Link>\r\n\r\n                            {user.role === 'APP_MASTER' && (\r\n                                <Link href=\"/dashboard/bugs\">\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        className={cn(\r\n                                            \"w-full justify-start h-10 px-3 rounded-xl transition-all\",\r\n                                            pathname === \"/dashboard/bugs\" ? \"bg-red-50 text-red-700 font-semibold\" : \"text-slate-600 hover:bg-slate-50\"\r\n                                        )}\r\n                                        size=\"sm\"\r\n                                    >\r\n                                        <Bug className={cn(\"mr-3 h-4 w-4\", pathname === \"/dashboard/bugs\" ? \"text-red-600\" : \"text-slate-400\")} />\r\n                                        Bugs\r\n                                        {pendingBugCount > 0 ? (\r\n                                            <span className=\"ml-auto bg-red-600 text-white text-[10px] font-bold h-5 w-5 flex items-center justify-center rounded-full shadow-lg shadow-red-200 animate-in zoom-in duration-300\">\r\n                                                {pendingBugCount}\r\n                                            </span>\r\n                                        ) : (\r\n                                            <span className=\"ml-auto bg-red-100 text-red-700 text-[8px] font-bold px-1.5 py-0.5 rounded-full\">MASTER</span>\r\n                                        )}\r\n                                    </Button>\r\n                                </Link>\r\n                            )}\r\n\r\n                            {user.role === 'APP_MASTER' && (\r\n                                <Link href=\"/dashboard/design-system\">\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        className={cn(\r\n                                            \"w-full justify-start h-10 px-3 rounded-xl transition-all\",\r\n                                            pathname === \"/dashboard/design-system\" ? \"bg-indigo-50 text-indigo-700 font-semibold\" : \"text-slate-600 hover:bg-slate-50\"\r\n                                        )}\r\n                                        size=\"sm\"\r\n                                    >\r\n                                        <LayoutDashboard className={cn(\"mr-3 h-4 w-4\", pathname === \"/dashboard/design-system\" ? \"text-indigo-600\" : \"text-slate-400\")} />\r\n                                        Design System\r\n                                    </Button>\r\n                                </Link>\r\n                            )}\r\n\r\n                            <Button variant=\"ghost\" className=\"w-full justify-start h-10 px-3 rounded-xl text-slate-600 hover:bg-slate-50\" size=\"sm\">\r\n                                <Settings className=\"mr-3 h-4 w-4 text-slate-400\" />\r\n                                Settings\r\n                            </Button>\r\n                        </nav>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between px-2 mb-3\">\r\n                            <h3 className=\"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400\">\r\n                                Recent Events\r\n                            </h3>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-6 w-6 rounded-lg hover:bg-indigo-50 hover:text-indigo-600\"\r\n                                onClick={() => setShowWizard(true)}\r\n                            >\r\n                                <Plus className=\"h-3.5 w-3.5\" />\r\n                            </Button>\r\n                        </div>\r\n\r\n                        {events.length === 0 ? (\r\n                            <div className=\"px-2 py-6 text-center bg-slate-50 rounded-2xl border border-dashed border-slate-200\">\r\n                                <p className=\"text-[10px] font-medium text-slate-400\">No events found</p>\r\n                            </div>\r\n                        ) : (\r\n                            <nav className=\"space-y-1\">\r\n                                {events.map(evt => (\r\n                                    <Link key={evt.id} href={`/dashboard/events/${evt.id}`}>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            className={cn(\r\n                                                \"w-full justify-start h-10 px-3 font-normal rounded-xl transition-all group\",\r\n                                                pathname === `/dashboard/events/${evt.id}` ? \"bg-indigo-50 text-indigo-700 font-semibold shadow-sm\" : \"text-slate-600 hover:bg-slate-50\"\r\n                                            )}\r\n                                            size=\"sm\"\r\n                                        >\r\n                                            <div className={cn(\r\n                                                \"mr-3 h-2 w-2 rounded-full\",\r\n                                                evt.status === 'ACTIVE' ? \"bg-green-500\" : \"bg-slate-300 group-hover:bg-indigo-400 transition-colors\"\r\n                                            )} />\r\n                                            <span className=\"truncate\">{evt.name}</span>\r\n                                        </Button>\r\n                                    </Link>\r\n                                ))}\r\n                            </nav>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-4 mt-auto\">\r\n                    <div className=\"bg-slate-50 rounded-2xl p-4 border border-slate-100\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-sm font-bold shadow-lg shadow-indigo-100\">\r\n                                    {user.name ? user.name.slice(0, 1).toUpperCase() : \"U\"}\r\n                                </div>\r\n                                <div className=\"text-sm overflow-hidden\">\r\n                                    <p className=\"font-bold text-slate-900 truncate max-w-[80px] leading-tight\">{user.name || \"User\"}</p>\r\n                                    <p className=\"text-[10px] font-medium text-slate-400 uppercase tracking-tighter\">\r\n                                        {user.role === 'APP_MASTER' ? 'App Master' : 'Workspace'}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-9 w-9 rounded-xl hover:bg-red-50 hover:text-red-600 transition-colors\"\r\n                                onClick={() => signOut({ callbackUrl: \"/login\" })}\r\n                                title=\"Log out\"\r\n                            >\r\n                                <LogOut className=\"h-4 w-4\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n\r\n            {showWizard && <EventWizard onClose={() => setShowWizard(false)} />}\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\components\\ui-components.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'profile' is defined but never used.","line":53,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":46},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":80,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":80,"endColumn":30,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2719,2732],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":82,"column":17,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":82,"endColumn":30,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2795,2808],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":101,"column":25,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":101,"endColumn":38,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3535,3548],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextAuthOptions } from \"next-auth\"\r\nimport CredentialsProvider from \"next-auth/providers/credentials\"\r\nimport GoogleProvider from \"next-auth/providers/google\"\r\nimport { db } from \"@/lib/db-client\"\r\nimport bcrypt from \"bcryptjs\"\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n    // Adapter removed to avoid Prisma dependency\r\n    session: {\r\n        strategy: \"jwt\",\r\n    },\r\n    providers: [\r\n        GoogleProvider({\r\n            clientId: process.env.GOOGLE_CLIENT_ID || \"mock-client-id\",\r\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"mock-secret\",\r\n            authorization: {\r\n                params: {\r\n                    prompt: \"consent\",\r\n                    access_type: \"offline\",\r\n                    response_type: \"code\"\r\n                }\r\n            }\r\n        }),\r\n        CredentialsProvider({\r\n            name: \"Credentials\",\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.email || !credentials?.password) return null\r\n\r\n                const user = await db.user.findUnique({\r\n                    where: { email: credentials.email }\r\n                })\r\n\r\n                if (!user || !user.password) {\r\n                    return null\r\n                }\r\n\r\n                const isValid = await bcrypt.compare(credentials.password, user.password)\r\n                if (!isValid) return null\r\n\r\n                return { id: user.id, email: user.email, name: user.name, role: user.role }\r\n            }\r\n        })\r\n    ],\r\n    pages: {\r\n        signIn: '/login',\r\n    },\r\n    callbacks: {\r\n        async signIn({ user, account, profile }) {\r\n            if (account?.provider === \"google\") {\r\n                if (!user.email) return false\r\n\r\n                // Check if user exists\r\n                const existingUser = await db.user.findUnique({\r\n                    where: { email: user.email }\r\n                })\r\n\r\n                if (existingUser) {\r\n                    return true // Allow sign in, existing account found\r\n                }\r\n\r\n                // Create new user if not exists\r\n                await db.user.create({\r\n                    data: {\r\n                        name: user.name,\r\n                        email: user.email,\r\n                        password: null, // Google users have no password\r\n                    }\r\n                })\r\n                return true\r\n            }\r\n            return true\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user && token.sub) {\r\n                // @ts-ignore\r\n                session.user.id = token.sub\r\n                // @ts-ignore\r\n                session.user.role = token.role\r\n            }\r\n            return session\r\n        },\r\n        async jwt({ token, user, account }) {\r\n            if (user) {\r\n                // Initial sign in\r\n                if (account) {\r\n                    if (account.provider === \"google\") {\r\n                        const dbUser = await db.user.findUnique({\r\n                            where: { email: user.email! }\r\n                        })\r\n                        if (dbUser) {\r\n                            token.sub = dbUser.id\r\n                            token.role = dbUser.role\r\n                        }\r\n                    } else {\r\n                        token.sub = user.id\r\n                        // @ts-ignore\r\n                        token.role = user.role\r\n                    }\r\n                }\r\n            }\r\n            return token\r\n        }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\db-client.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'mapUser' is defined but never used.","line":12,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[386,389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[386,389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1193,1196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1193,1196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2122,2125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2122,2125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3375,3378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3375,3378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":137,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":137,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4836,4839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4836,4839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":157,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5509,5512],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5509,5512],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6433,6436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6433,6436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport 'server-only'\r\nimport { createClient } from '@supabase/supabase-js'\r\nimport { User, Event, Contract } from \"@/lib/types\"\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nconst supabase = createClient(supabaseUrl, supabaseKey)\r\n\r\n// Helper to ensure we return matching types\r\nfunction mapUser(data: any): User {\r\n    return {\r\n        ...data,\r\n        // Ensure optional fields are handled if missing\r\n    }\r\n}\r\n\r\nclass SupabaseClient {\r\n    public user = {\r\n        findUnique: async ({ where }: { where: { email: string } }) => {\r\n            const { data, error } = await supabase\r\n                .from('users')\r\n                .select('*')\r\n                .eq('email', where.email)\r\n                .single()\r\n\r\n            if (error || !data) return null\r\n\r\n            // Hardcode App Master for ivan@pixelimperfect.io\r\n            if (data.email === 'ivan@pixelimperfect.io') {\r\n                data.role = 'APP_MASTER'\r\n            } else {\r\n                data.role = data.role || 'USER'\r\n            }\r\n\r\n            return data as User\r\n        },\r\n        create: async ({ data }: { data: any }) => {\r\n            // Check for App Master email during creation\r\n            const role = data.email === 'ivan@pixelimperfect.io' ? 'APP_MASTER' : 'USER'\r\n            const { data: newUser, error } = await supabase\r\n                .from('users')\r\n                .insert({\r\n                    name: data.name,\r\n                    email: data.email,\r\n                    password: data.password,\r\n                    role,\r\n                    \"hasCompletedOnboarding\": false,\r\n                    // createdAt/updatedAt handled by default in DB or we can send them\r\n                    \"updatedAt\": new Date().toISOString(),\r\n                    \"createdAt\": new Date().toISOString()\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n            return newUser as User\r\n        },\r\n        update: async ({ where, data }: { where: { email: string }, data: any }) => {\r\n            const { data: updatedUser, error } = await supabase\r\n                .from('users')\r\n                .update({\r\n                    ...data,\r\n                    \"updatedAt\": new Date().toISOString()\r\n                })\r\n                .eq('email', where.email)\r\n                .select()\r\n                .single()\r\n\r\n            if (error) {\r\n                console.error(\"Supabase Update Error:\", error)\r\n                return null\r\n            }\r\n            return updatedUser as User\r\n        }\r\n    }\r\n\r\n    public event = {\r\n        findMany: async ({ where }: { where: { userId: string } }) => {\r\n            const { data, error } = await supabase\r\n                .from('events')\r\n                .select('*')\r\n                .eq('userId', where.userId)\r\n\r\n            if (error) return []\r\n            return data as Event[]\r\n        },\r\n        findUnique: async ({ where }: { where: { id: string } }) => {\r\n            const { data, error } = await supabase\r\n                .from('events')\r\n                .select('*')\r\n                .eq('id', where.id)\r\n                .single()\r\n\r\n            if (error) return null\r\n            return data as Event\r\n        },\r\n        create: async ({ data }: { data: any }) => {\r\n            const { data: newEvent, error } = await supabase\r\n                .from('events')\r\n                .insert({\r\n                    \"userId\": data.userId,\r\n                    name: data.name,\r\n                    \"clientName\": data.clientName,\r\n                    type: data.type || 'Other',\r\n                    status: data.status || 'PLANNING',\r\n                    \"startDate\": data.startDate,\r\n                    \"endDate\": data.endDate,\r\n                    \"startTime\": data.startTime,\r\n                    \"endTime\": data.endTime,\r\n                    \"venueName\": data.venueName,\r\n                    \"venueAddress\": data.venueAddress,\r\n                    timezone: data.timezone || 'UTC',\r\n                    sections: data.sections || [],\r\n                    \"updatedAt\": new Date().toISOString(),\r\n                    \"createdAt\": new Date().toISOString()\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n            return newEvent as Event\r\n        }\r\n    };\r\n\r\n    public contract = {\r\n        findMany: async ({ where }: { where: { eventId: string } }) => {\r\n            const { data, error } = await supabase\r\n                .from('contracts')\r\n                .select('*')\r\n                .eq('eventId', where.eventId)\r\n\r\n            if (error) return []\r\n            return data as Contract[]\r\n        },\r\n        create: async ({ data }: { data: any }) => {\r\n            const { data: newContract, error } = await supabase\r\n                .from('contracts')\r\n                .insert({\r\n                    \"eventId\": data.eventId,\r\n                    title: data.title,\r\n                    status: 'DRAFT',\r\n                    versions: [], // JSON default\r\n                    \"updatedAt\": new Date().toISOString(),\r\n                    \"createdAt\": new Date().toISOString()\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) throw error\r\n            return newContract as Contract\r\n        }\r\n    };\r\n\r\n    public bug = {\r\n        create: async ({ data }: { data: any }) => {\r\n            console.log(\"[DEBUG] Supabase Insert Data (snake_case):\", data)\r\n            const { data: newBug, error } = await supabase\r\n                .from('bugs')\r\n                .insert({\r\n                    \"reporter_id\": data.reporterId,\r\n                    \"element_selector\": data.elementSelector,\r\n                    \"element_text\": data.elementText,\r\n                    \"description\": data.description,\r\n                    \"status\": 'PENDING',\r\n                    \"updated_at\": new Date().toISOString(),\r\n                    \"created_at\": new Date().toISOString()\r\n                })\r\n                .select()\r\n                .single()\r\n\r\n            if (error) {\r\n                console.error(\"[ERROR] Supabase Insert Error:\", error)\r\n                throw error\r\n            }\r\n            return newBug\r\n        },\r\n        update: async ({ where, data }: { where: { id: string }, data: any }) => {\r\n            const { data: updatedBug, error } = await supabase\r\n                .from('bugs')\r\n                .update({\r\n                    \"status\": data.status,\r\n                    \"updated_at\": new Date().toISOString()\r\n                })\r\n                .eq('id', where.id)\r\n                .select()\r\n                .single()\r\n\r\n            if (error) {\r\n                console.error(\"[ERROR] Supabase Bug Update Error:\", error)\r\n                throw error\r\n            }\r\n            return updatedBug\r\n        },\r\n        findMany: async ({ where }: { where: { reporterId?: string } }) => {\r\n            let query = supabase.from('bugs').select('*')\r\n            if (where.reporterId) query = query.eq('reporter_id', where.reporterId)\r\n            const { data, error } = await query\r\n            if (error) {\r\n                console.error(\"[ERROR] Supabase findMany Bugs Error:\", error)\r\n                return []\r\n            }\r\n            return data\r\n        }\r\n    };\r\n}\r\n\r\nexport const db = new SupabaseClient();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\mock-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[776,779],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[776,779],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nexport interface User {\r\n    id: string;\r\n    name: string | null;\r\n    email: string;\r\n    password?: string | null;\r\n    hasCompletedOnboarding?: boolean;\r\n    workspaceName?: string | null;\r\n    role?: 'USER' | 'APP_MASTER';\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface Event {\r\n    id: string;\r\n    userId: string;\r\n    name: string;\r\n    clientName?: string | null;\r\n    type: 'Wedding' | 'Corporate' | 'Social' | 'Conference' | 'Non-Profit' | 'Other';\r\n    status: 'DRAFT' | 'PLANNING' | 'ACTIVE' | 'COMPLETED';\r\n    startDate?: string | null;\r\n    endDate?: string | null;\r\n    startTime?: string | null;\r\n    endTime?: string | null;\r\n    venueName?: string | null;\r\n    venueAddress?: string | null;\r\n    timezone: string;\r\n    sections?: any[] | null;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface Contract {\r\n    id: string;\r\n    eventId: string;\r\n    title: string;\r\n    status: 'DRAFT' | 'FINAL' | 'SIGNED';\r\n    versions: ContractVersion[];\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface ContractVersion {\r\n    version: number;\r\n    file: string;\r\n    date: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ivano\\.gemini\\antigravity\\scratch\\event-vault\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]